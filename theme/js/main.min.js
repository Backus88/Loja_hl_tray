/**
 * @theme Default-Patners
 * @version 0.0.1
 * @author Tray
 * @site https://www.tray.com.br/
 */

(e=>{e.fn.changeElementType=function(t){var i={};e.each(this[0].attributes,(function(e,t){i[t.nodeName]=t.nodeValue})),this.replaceWith((function(){return e("<"+t+"/>",i).append(e(this).contents())}))},window.theme={...window.theme,settings:{lastScrollPosition:0,storeId:0},openApplyOverlayClose:function(){e('[data-toggle="closed"]').on("click",(function(){e(e(this).data("target")).addClass("u-show").attr("data-toggle","open"),e('[data-overlay="shadow"]').addClass("u-show"),e("body").addClass("overflowed")})),e('[data-overlay="shadow"]').on("click",(function(){e('[data-toggle="open"]').removeClass("u-show").removeAttr("data-toggle"),e('[data-overlay="shadow"]').removeClass("u-show"),e("body").removeClass("overflowed")})),e('[data-toggle="close"]').on("click",(function(){e('[data-overlay="shadow"]').trigger("click")}))},scrollHidesMenu:function(){const t=e('[data-header="scroll"]');let i=e('[data-header="scroll"]').outerHeight()+20,s=e(window).scrollTop()-20;s>this.settings.lastScrollPosition&&s>i?t.addClass("u-effectHeader"):s>i&&s<this.settings.lastScrollPosition&&t.removeClass("u-effectHeader"),this.settings.lastScrollPosition=s},getScroll:function(){let t=this;e(window).on("scroll",(function(){t.scrollHidesMenu()}))},mainMenuMobile:function(){e('[data-toggle="account"]').on("click",(function(t){let i=e(this).parent();return i.toggleClass("u-show"),i.hasClass("u-show")?i.children(".sub").slideDown():i.children(".sub").slideUp(),t.preventDefault(),!1}))},bannerSlides:function(){const t='[data-slides="banner"]';if(e(t).length){const i=e(t);let s=e(".swiper-slide",i).length,o=i.data("settings");s>0&&(new Swiper(t+" .swiper",{preloadImages:!1,loop:!0,autoHeight:!0,effect:"slide",autoplay:{delay:o.timer,disableOnInteraction:!1},lazy:{loadPrevNext:!0},pagination:{el:t+" .swiper-pagination",bulletClass:"icon-circle",bulletActiveClass:"icon-circle-empty",clickable:!o.isMobile},navigation:{prevEl:".icon-arrow-left",nextEl:".icon-arrow-right"}}),o.stopOnHover&&(e(t+" .swiper").on("mouseenter",(function(){this.swiper.autoplay.stop()})),e(t+" .swiper").on("mouseleave",(function(){this.swiper.autoplay.start()}))))}},depositionsSlidesOnHome:function(){const t='[data-slides="depositions"]';if(e(t).length){e(".dep_lista").changeElementType("div"),e(".dep_item").changeElementType("div"),e(".dep_item").addClass("swiper-slide"),e(t+" .dep_lista").addClass("swiper-wrapper").wrap('<div class="swiper"></div>'),e(t+" .swiper").append('           \n                    <div class="swiper-pagination"></div>\n                ');new Swiper(t+" .swiper",{slidesPerView:3,lazy:{loadPrevNext:!0},loop:!1,breakpoints:{0:{slidesPerView:1},600:{slidesPerView:2},1e3:{slidesPerView:3}},pagination:{el:t+" .swiper-pagination",bulletClass:"icon-circle",bulletActiveClass:"icon-circle-empty",clickable:!1},on:{init:function(){e(t).addClass("show")}}});e(t+" .dep_dados").wrap('<a href="/depoimentos-de-clientes" title="Ver depoimento"></a>'),e(t+" .dep_lista li:hidden").remove()}else e(t+" .dep_lista").remove()},loadNewsPageOnHome:function(){if(e(".news").length){let t=e("html").data("files");e.ajax({url:`/loja/busca_noticias.php?loja=${this.settings.storeId}&${t}`,method:"get",success:function(t){let i,s;e(t).find(".noticias").length?(i=e(".section.news .news-content"),s=e(e(t).find(".noticias")),s.find("li:nth-child(n+4)").remove(),s.find("li").wrapInner('<div class="news-item"></div>'),s=s.contents(),s.each((function(t,i){e(i).find("img").closest("div").remove()})),i.append(s)):e(".section.news").remove()}})}}},e(()=>{theme.getScroll(),setTimeout(()=>{theme.openApplyOverlayClose(),theme.scrollHidesMenu(),theme.mainMenuMobile()},20),e("html").hasClass("page-home")&&(setTimeout((function(){theme.bannerSlides(),theme.loadNewsPageOnHome()}),40),theme.depositionsSlidesOnHome())})})(jQuery);